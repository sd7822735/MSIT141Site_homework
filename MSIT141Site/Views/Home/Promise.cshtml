
@{
    ViewData["Title"] = "Promise";
}

<h1>Promise</h1>

@section Scripts{
    <script>
    //setTimeout(function () {
    //    console.log('A');
    //    setTimeout(function () {
    //        console.log('B');
    //        setTimeout(function () {
    //            console.log('C');
    //        }, 1000);
    //    }, 1000);
    //}, 1000);
        //建立Promise物件
        //const promise = new Promise((resolve, reject) => {
        //    const num = Math.random() > 0.5 ? 1 : 0;
        //    if (num==1) {
        //        resolve("成功")
        //    }
        //    else {
        //        reject("失敗")
        //    }
        //})
   
    ////使用Promise物件
            //promise
            //    .then((result) => {
            //        console.log(result);
            //    })
            //    .catch((err) => {
            //        console.log(err);
            //    })
            //    .finally(() => {
            //        console.log("end");
            //    })
    


    function printSomething(data) {
        const promise = new Promise((resolve, reject) => {
            setTimeout(() => { resolve(data)},1000)
        })
        return promise;
    }
    printSomething("A")
        .then((data) => {
            console.log(data);
            return printSomething("B");
        })
        .then((data) => {
            console.log(data);
            return printSomething("C");
        })
        .then((data) => {
            console.log(data);
        })
    </script>

} 